<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .board {
            margin: 100px auto 0 auto;
            width: 600px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
        }

        .board div {
            border: solid 1px black;
            width: 200px;
            height: 200px;
            font-size: 100px;
            text-align: center;
            line-height: 2;
        }
    </style>
</head>

<body>
    <div class="board">
    </div>
</body>
<script>
    // ç¾åœ¨ã®æ‰‹ç•ªã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
    let count = 0;

    // ã‚²ãƒ¼ãƒ ãŒçµ‚äº†ã—ãŸã‹ã‚’è¡¨ã™ãƒ•ãƒ©ã‚°
    let flag = false;

    // ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã®é€²è¡ŒçŠ¶æ³ã‚’ä¿å­˜ã™ã‚‹é…åˆ—
    const gameArray = new Array(9).fill(0);

    // ä¸‰ã¤ã®å€¤ãŒä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•° booleanã‚’è¿”ã™
    // å¼•æ•°ã¨ã—ã¦è¦ç´ ãŒï¼“ã¤ã®é…åˆ—ã‚’å—ã‘å–ã‚‹
    const checkSame = (array) => {
        const a = gameArray[array[0]];//checkArrayã®[0]æ¡ç›®ã‚’indexç•ªå·ã¨ã—ã¦ä½¿ç”¨
        const b = gameArray[array[1]];//checkArrayã®[1]æ¡ç›®ã‚’indexç•ªå·ã¨ã—ã¦ä½¿ç”¨
        const c = gameArray[array[2]];//checkArrayã®[2]æ¡ç›®ã‚’indexç•ªå·ã¨ã—ã¦ä½¿ç”¨
        console.log("ğŸš€checkSame const a,b,cã®å†…å®¹", a, b, c)

        if ([a, b, c].every(value => value !== 0)) {
            console.log("checksome ifã®iféƒ¨åˆ†ã€€â˜…0ãªã—", a, b, c)
            return a === b && a === c;
        } else {
            console.log("checksome ifã®elseéƒ¨åˆ†ã€€0ã‚ã‚Š", a, b, c)

        }
    }

    // ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã¹ãç¸¦æ¨ªæ–œã‚ã®çµ„ã¿åˆã‚ã›ã‚’è¨˜éŒ²ã—ãŸé…åˆ—
    const checkArray = [
    //  [0][1][2]ã€€æ¡ç›®ã¨ã—ã¦æ‰±ã†ãŸã‚ã«checkSameã«é€ã£ã¦ã‚‹ 
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8],
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8],
        [0, 4, 8],
        [2, 4, 6]
    ];

    const checkWinner = (player) => {
        // å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã§æ¤œè¨¼ã—ã¦ã€ä¸€ã¤ã§ã‚‚æˆç«‹ã—ã¦ã„ã‚Œã°trueã‚’è¿”ã™
        //ã€€ä»¥ä¸‹2åˆ†ã¯ç¢ºèªç”¨
        console.log(" ");
        const checkBoardView = checkArray.map(array => array);//ãã®ã¾ã¾å…¥ã‚Œç›´ã—
        console.log("ğŸš€checkArray.map(array)ã®å†…å®¹", checkBoardView)
        console.log(" ");

        //.mapã¯è¦ç´ å…¨ã¦ã«å‡¦ç†ã‚’ã‹ã‘ã‚‹ã®ã§ã€ä¸‹è¨˜ã®æ–‡ç« 1æ–‡ã§1ã‚¯ãƒªãƒƒã‚¯ã«ã¤ãä¸Šè¨˜8ãƒ‘ã‚¿ãƒ¼ãƒ³ã®é…åˆ—ã‚’checksameã«é€ã£ã¦ç¢ºèªã—ã¦ã„ã‚‹
        const checkBoard = checkArray.map(array => checkSame(array)).includes(true)
        if (checkBoard) {
            // ã‚²ãƒ¼ãƒ ãŒçµ‚äº†ã—ãŸã®ã§ã€flagã‚’trueã«ã™ã‚‹
            flag = true;
            console.log(player + "ã®å‹ã¡!");
        }
    }

    const board = document.querySelector('.board')

    // boardè¦ç´ ã®ä¸­ã«divã‚’9å€‹ä½œã‚‹
    for (let i = 0; i < 9; i++) {
        const masu = document.createElement('div');
        // ä½œã£ãŸdivè¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
        masu.addEventListener('click', () => {

            // ã™ã§ã«ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã„ãªã„ãƒã‚¹ã§ã‚ã‚‹ã‹ã¤ã‚²ãƒ¼ãƒ ãŒç¶šã„ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
            if (gameArray[i] === 0 && flag === false) {

                if (count % 2 === 0) {
                    masu.textContent = "â—¯";
                    gameArray[i] = "â—¯";
                    checkWinner("â—¯")
                } else {
                    masu.textContent = "Ã—";
                    gameArray[i] = "Ã—";
                    checkWinner("Ã—")
                }
                count++;

            }
        })
        board.append(masu)
    }
</script>

</html>